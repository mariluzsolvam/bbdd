<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Base de Datos by mariluzsolvam</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Base de Datos</h1>
    </section>

    <section class="main-content">
      <h1>
<a id="bienvenidos-a-la-asignatura-base-datos" class="anchor" href="#bienvenidos-a-la-asignatura-base-datos" aria-hidden="true">
  <span aria-hidden="true" class="octicon octicon-link"></span></a>Bienvenidos a la asignatura Base de Datos</h1>
<section class="menu">

<!--   
 <a href="fn.html" class="btn">Normalización</a>
-->

</section>
<h1>Proyecto BREAINS</h1>

      <h3>Diseño de la base de datos</h3>
<p>Abre tu panel de control para crear la siguiente base de datos en el servidor con cotejamiento <b>UTF-8.</b></p>
<p>Abre phpmyadmin y crea cada tabla con cotejamiento <b>UTF-8.</b></p>
<p>Todos los campos Varchar los tienes que crear con cotejamiento <b>UTF-8.</b> Cuando lo tengas creado, comprueba una vez más que está en UTF-8 y rellena las tablas.</p>
<p><img src="img/diseñoBD.PNG" alt="base de datos" width="450"></p>

      <h3>Conexión en php con la base de datos</h3>
      <p>Primero haremos una carpeta <i>breains</i> en Filezilla y en local para ir guardando los archivos necesarios de nuestro proyecto.</p>
      <p>1. Creamos una carpeta dentro de breains llamada <i>includes</i> donde guardaremos el archivo <b>datos_conexion.php</b> que vamos a crear ahora.</p>
      <p>NOTA: datos_conexion.php contien 4 variables con el valor de tu servidor, usuario, contraseña y base de datos. Estos datos los utilizaremos posteriormente en conexion.php para crear la conexion con la base de datos.</p>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/1TwOANs8TU4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      <p>2. En la carpeta breains, creamos el siguiente archivo llamado <b>conexion.php</b> para crear la conexión con la base de datos.</p>
      <iframe width="560" height="315" src="https://www.youtube.com/embed/pEr-uD57TPI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      <p>3. Sube los archivos al servidor y abre un navegador con tu URL seguido de breains/conexion.php. Si sale la página sin errores, es que se ha conectado correctamente.</p>
<h3>Mostrar datos de una tabla</h3>
      <p>Para mostrar los datos de una tabla, tienes que seguir los siguientes pasos:
      <ul>Se incluye la conexión con la función include.
      </ul>
      <ul>Se ejecuta el método query con la consulta SQL.
      </ul>
      <ul>Se recorren los resultados de la consulta con un while para mostrar cada dato.
      </ul>
      </p>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/N56fKfAbtVA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    <p>Crea los archivos tipos.php, modelos.php y productos.php según la explicación anterior.</p>  
  
    <h3>index.php y menu.php</h3>
    <p>Ahora vamos a crear un index.php y un menu.php que aparecza en cada página de las que hemos creado anteriormente:</p>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/AcVbY6CbbGs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    
    <h3>Eliminar un registro de la tabla. PRIMERA PARTE</h3>
    <p>Creamos en tipos.php dos columnas más Editar y Eliminar fuera del bucle.</p>
    <p>Dentro del bucle, creamos dos celdas más "Editar" y "Eliminar" que nos lleven respectivamente a editar_tipo.php y eliminar_tipo.php</p>
    <p>La url de ambas opciones debe llevar una variable con el valor de la clave primaria de dicho registro.</p>
    <p>Cuando cliques en el enlace de "Eliminar" fíjate que en la URL haya pasado una variable (codigo) con un valor.</p>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/69ADMp31YQU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
   
    <h3>Eliminar un registro de la tabla. SEGUNDA PARTE</h3>
    <p>Inserta dos o tres registros de prueba en la tabla tipos. Esto lo hacemos para no eliminar datos que necesitamos y que están relacionado con la tabla modelos y no se van a poder eliminar por estar la restricción de la clave ajena en RESTRICT.</p>
    <p>Crea el archivo eliminr_tipos.php. Realiza las siguientes acciones:</p>
    <ol>Incluye la conexión.</ol>
    <ol>Recoge la variable que pasa por URL con $_GET</ol>
    <ol>Ejecuta la query DELETE FROM tipos WHERE codigo='$codigo_tipo' ATENCIÓN: codigo en la query es el nombre del campo de la tabla tipos.</ol>
    <ol>Haz una redirección a tipos.php</ol>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/cFH7m38pUMU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
   
    <h3>Insertar un registro de la tabla tipos</h3>
    <p>Para insertar un registro en la tabla ripos, realiza las siguientes acciones:</p>
    <p>En tipos.php crea un formulario con los campos "codigo" y "tipo" que se procese en insertar_tipo.php</p>
    <p>En insertar_tipo.php: </p>
    <ol>Incluye la conexión.</ol>
    <ol>Recoge las variables que pasan por formulario con $_POST fijandote en el name</ol>
    <ol>Ejecuta la query</ol>
    <ol>Haz una redirección a tipos.php</ol>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/3Pudsf47ezM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    
      <h3>Insertar un registro con claves ajenas</h3>
    <p>Vamos a insertar un registro en la tabla modelos. Esta tabla tiene el campo codigo_tipo que hace referencia a un código de la tabla tipos.</p>
    <p>en el formulario de inserción, cambiaremos el cuadro de texto de codigo_tipo por un select con opciones.</p>
    <p>Después del select, haremos una SQL para seleccionar todos los códigos de la tabla tipos y en el bucle que recorre esa consulta, pondremos la etiqueta <option> del select, así saldrán tantas opciones como códigos haya en la tabla tipos.</p>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/qvVV9_id_QU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    
    <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/mariluzsolvam/bbdd">Base de Datos</a> is maintained by <a href="https://github.com/mariluzsolvam">mariluzsolvam</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
   </footer>

    </section>

  
  </body>
</html>
